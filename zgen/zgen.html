<!doctype html>
<html lang="en">
<head>
  <!-- =========================================================
    BASIC META
  ========================================================== -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ZGEN ‚Äì Generation Finder</title>

  <link rel="canonical" href="https://ubterzioglu.de/zgen/zgen.html" />
  <meta name="description" content="Enter your birth year and instantly see your generation, core traits, and how to get along with other generations. Runs entirely in your browser." />
  <meta name="robots" content="index,follow" />

  <!-- Standalone CSS -->
  <link rel="stylesheet" href="/zgen/style.css?v=4" />

  <!-- =========================================================
    OPEN GRAPH / TWITTER
  ========================================================== -->
  <meta property="og:type" content="website" />
  <meta property="og:title" content="ZGEN ‚Äì Generation Finder" />
  <meta property="og:description" content="Type your birth year. Get your generation + traits + compatibility tips. No signup. Runs locally in your browser." />
  <meta property="og:url" content="https://ubterzioglu.de/zgen/zgen.html" />
  <meta property="og:image" content="https://ubterzioglu.de/img/logoubt.png" />
  <meta name="twitter:card" content="summary_large_image" />

  <!-- =========================================================
    STRUCTURED DATA (JSON-LD)
  ========================================================== -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebPage",
    "@id": "https://ubterzioglu.de/zgen/zgen.html#webpage",
    "url": "https://ubterzioglu.de/zgen/zgen.html",
    "name": "ZGEN ‚Äì Generation Finder",
    "description": "Enter your birth year and instantly see your generation, core traits, and compatibility tips. Runs entirely in your browser.",
    "isPartOf": { "@type": "WebSite", "@id": "https://ubterzioglu.de/#website" },
    "about": { "@type": "Person", "@id": "https://ubterzioglu.de/#person" }
  }
  </script>

  <!-- =========================================================
    GOATCOUNTER
  ========================================================== -->
  <script data-goatcounter="https://ubterzioglude.goatcounter.com/count"
          async src="https://gc.zgo.at/count.js"></script>
</head>

<body>
  <div class="wrap">
    <div class="shell">

      <!-- HEADER -->
      <header class="hero">
        <div class="hero-left">
          <h1 class="title">ZGEN</h1>
          <p class="subtitle">
            Enter your birth year and instantly see your generation, traits, and how to get along with other generations.
            No signup. No data stored. Runs locally in your browser.
          </p>
        </div>

        <div class="hero-right">
          <div class="palette-dots" aria-label="Color palette">
            <span class="dot dot-blue" title="#01A1F1"></span>
            <span class="dot dot-green" title="#7CBB00"></span>
            <span class="dot dot-orange" title="#F65314"></span>
            <span class="dot dot-purple" title="#8F03B7"></span>
            <span class="dot dot-yellow" title="#FFBB00"></span>
          </div>
          <div class="pill" id="statusPill">Waiting for birth year‚Ä¶</div>
        </div>
      </header>

      <main class="grid">

        <!-- CARD 1: INPUT -->
        <section class="card card-blue" aria-labelledby="c1">
          <div class="card-head">
            <h2 id="c1" class="card-title">1) Birth year</h2>
            <p class="card-sub">Just one field. No extra questions.</p>
          </div>

          <div class="input-row">
            <label class="sr-only" for="birthYear">Birth year</label>
            <input
              id="birthYear"
              class="input"
              inputmode="numeric"
              placeholder="e.g., 1999"
              maxlength="4"
              autocomplete="off"
            />
            <button class="btn" id="showBtn" type="button">Show my generation</button>
          </div>

          <p class="micro">Tip: You can also press <kbd>Enter</kbd>.</p>
        </section>

        <!-- CARD 2: YOU ARE GEN ... -->
        <section class="card card-green" id="youCard" aria-labelledby="c2" hidden>
          <div class="card-head">
            <h2 id="c2" class="card-title">2) Your generation</h2>
            <p class="card-sub" id="youGenLine">You are <strong>Gen ?</strong>.</p>
          </div>

          <div class="two-col">
            <!-- LEFT: 10 bullets -->
            <div>
              <h3 class="mini-title">Typical traits (placeholder)</h3>
              <ul class="bullets" id="traits10">
                <li>Trait #1 (placeholder)</li>
                <li>Trait #2 (placeholder)</li>
                <li>Trait #3 (placeholder)</li>
                <li>Trait #4 (placeholder)</li>
                <li>Trait #5 (placeholder)</li>
                <li>Trait #6 (placeholder)</li>
                <li>Trait #7 (placeholder)</li>
                <li>Trait #8 (placeholder)</li>
                <li>Trait #9 (placeholder)</li>
                <li>Trait #10 (placeholder)</li>
              </ul>
            </div>

            <!-- RIGHT: avatar + 5 bullets -->
            <aside class="sidebox">
              <div class="avatar-row">
                <div class="avatar" id="avatarYou" aria-hidden="true">üôÇ</div>
                <div>
                  <div class="avatar-title" id="avatarTitle">Your vibe (placeholder)</div>
                  <div class="avatar-sub" id="avatarSub">Short, punchy bullets.</div>
                </div>
              </div>

              <ul class="chips" id="vibe5">
                <li>Vibe #1 (placeholder)</li>
                <li>Vibe #2 (placeholder)</li>
                <li>Vibe #3 (placeholder)</li>
                <li>Vibe #4 (placeholder)</li>
                <li>Vibe #5 (placeholder)</li>
              </ul>
            </aside>
          </div>
        </section>

        <!-- COMPATIBILITY HEADER -->
        <section class="card card-orange" id="compatHeader" aria-labelledby="c3" hidden>
          <div class="card-head">
            <h2 id="c3" class="card-title">3) Compatibility (optional)</h2>
            <p class="card-sub">
              Tap a card to expand. Do‚Äôs & Don‚Äôts are placeholders until you paste real data.
            </p>
          </div>
        </section>

        <!-- ACCORDIONS (DYNAMIC) -->
        <section class="accordion" id="accordions" hidden></section>

      </main>

      <!-- CORNER WIDGET -->
      <div class="corner-widget">
        <a href="https://ubterzioglu.de/">
          <img src="/img/logoubt.png" alt="UBT logo" class="widget-avatar" />
        </a>
        <a href="https://ubterzioglu.de/">
          <img src="/img/picprofile.png" alt="UBT profile" class="widget-avatar logo" />
        </a>
      </div>

    </div>
  </div>

  <!-- =========================================================
    DATA (separate file)
    Path: /zgen/zgen-data.js
  ========================================================== -->
  <script src="/zgen/zgen-data.js?v=1"></script>

  <!-- =========================================================
    APP LOGIC (kept inline to avoid extra files)
  ========================================================== -->
  <script>
    // Hard stop if data didn't load
    if (!window.ZGEN_DATA && typeof ZGEN_DATA === "undefined") {
      console.error("ZGEN_DATA not found. Make sure /zgen/zgen-data.js is loaded.");
    }

    /* =========================================================
      ELEMENTS
      ========================================================= */
    const birthYearEl = document.getElementById("birthYear");
    const showBtn = document.getElementById("showBtn");

    const statusPill = document.getElementById("statusPill");
    const youCard = document.getElementById("youCard");
    const youGenLine = document.getElementById("youGenLine");

    const avatarTitle = document.getElementById("avatarTitle");
    const avatarSub = document.getElementById("avatarSub");
    const avatarYou = document.getElementById("avatarYou");

    const compatHeader = document.getElementById("compatHeader");
    const accordions = document.getElementById("accordions");

    /* =========================================================
      HELPERS
      ========================================================= */
    function getGenByYear(year) {
      return ZGEN_DATA.generations.find(g => year >= g.range[0] && year <= g.range[1]) || ZGEN_DATA.generations[ZGEN_DATA.generations.length - 1];
    }

    function getCompat(youId, otherId) {
      const hit = ZGEN_DATA.compat?.[youId]?.[otherId];
      return hit || {
        dos: ["Do #1 (placeholder)", "Do #2 (placeholder)", "Do #3 (placeholder)", "Do #4 (placeholder)", "Do #5 (placeholder)"],
        donts: ["Don‚Äôt #1 (placeholder)", "Don‚Äôt #2 (placeholder)", "Don‚Äôt #3 (placeholder)", "Don‚Äôt #4 (placeholder)", "Don‚Äôt #5 (placeholder)"],
        joke: "Placeholder joke (optional)."
      };
    }

    function pickCardColorClass(i) {
      const arr = ["card-purple", "card-yellow", "card-blue", "card-green", "card-orange"];
      return arr[i % arr.length];
    }

    function makeCard({ youGen, otherGen, content, colorClass }) {
      const card = document.createElement("article");
      card.className = `acc card ${colorClass}`;
      card.dataset.gen = otherGen.id;

      card.innerHTML = `
        <button class="acc-head" type="button" aria-expanded="false">
          <div class="acc-title">
            <span class="acc-kicker">How to get along with</span>
            <span class="acc-name">${otherGen.name}</span>
          </div>
          <span class="acc-icon" aria-hidden="true">+</span>
        </button>

        <div class="acc-body" hidden>
          <div class="acc-avatars">
            <div class="avatar sm" aria-hidden="true">${youGen.avatar || "üôÇ"}</div>
            <div class="avatar sm" aria-hidden="true">${otherGen.avatar || "‚ö°"}</div>

            <div class="avatar-tags">
              <span class="tag">You</span>
              <span class="tag">${otherGen.name}</span>
            </div>
          </div>

          <div class="acc-cols">
            <div class="dos">
              <h3 class="mini-title dos-title">‚úÖ Do‚Äôs</h3>
              <ul class="bullets">
                ${content.dos.map(x => `<li>${x}</li>`).join("")}
              </ul>
            </div>

            <div class="donts">
              <h3 class="mini-title donts-title">‚ùå Don‚Äôts</h3>
              <ul class="bullets">
                ${content.donts.map(x => `<li>${x}</li>`).join("")}
              </ul>
            </div>
          </div>

          <p class="micro joke-line">‚Äú${content.joke}‚Äù</p>
        </div>
      `;

      const head = card.querySelector(".acc-head");
      const body = card.querySelector(".acc-body");
      const icon = card.querySelector(".acc-icon");

      head.addEventListener("click", () => {
        const isOpen = head.getAttribute("aria-expanded") === "true";
        head.setAttribute("aria-expanded", String(!isOpen));
        body.hidden = isOpen;
        icon.textContent = isOpen ? "+" : "‚Äì";
      });

      return card;
    }

    function renderCompatibility(youGen) {
      accordions.innerHTML = "";
      const others = ZGEN_DATA.generations.filter(g => g.id !== youGen.id);

      others.forEach((other, idx) => {
        const content = getCompat(youGen.id, other.id);
        const colorClass = pickCardColorClass(idx);
        accordions.appendChild(makeCard({ youGen, otherGen: other, content, colorClass }));
      });
    }

    function setYouAvatar(genName){
      const map = {
        "Silent Generation": "üï∞Ô∏è",
        "Baby Boomers": "üìû",
        "Gen X": "üß©",
        "Millennials (Gen Y)": "‚òï",
        "Gen Z": "‚ö°",
        "Gen Alpha": "ü§ñ",
        "Gen Beta": "üß†"
      };
      avatarYou.textContent = map[genName] || "üôÇ";
    }

    function updateUI(){
      const raw = (birthYearEl.value || "").trim();
      const year = Number(raw);

      const valid = raw.length === 4 && Number.isInteger(year) && year >= 1900 && year <= 2100;
      if (!valid){
        statusPill.textContent = "Enter a 4-digit birth year (e.g., 1999)";
        youCard.hidden = true;
        compatHeader.hidden = true;
        accordions.hidden = true;
        return;
      }

      const youGen = getGenByYear(year);
      statusPill.textContent = `Detected: ${youGen.name}`;
      youGenLine.innerHTML = `You are <strong>${youGen.name}</strong>.`;

      // placeholders (traits/vibe will be data-driven later)
      avatarTitle.textContent = `${youGen.name} vibe (placeholder)`;
      avatarSub.textContent = "We‚Äôll fill these with real content later.";
      setYouAvatar(youGen.name);

      renderCompatibility(youGen);

      youCard.hidden = false;
      compatHeader.hidden = false;
      accordions.hidden = false;
    }

    showBtn.addEventListener("click", updateUI);
    birthYearEl.addEventListener("keydown", (e) => {
      if (e.key === "Enter") updateUI();
    });
    birthYearEl.addEventListener("input", updateUI);
  </script>
</body>
</html>
